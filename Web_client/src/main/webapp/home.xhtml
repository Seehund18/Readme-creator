<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml"
      xmlns:h = "http://java.sun.com/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Readme generator</title>
        <h:outputStylesheet library="css" name="styles.css"/>
    </h:head>

    <h:body>
        <h1>Readme generator</h1>
        <hr/>
        <h3>Please, enter a web service URL in an appropriate format</h3>
        <i>Examples:</i><br/>
        http://localhost:8080<br/>
        http://myService.com<br/>

        <h:form id="form">
            <h:panelGrid id="panel1" columns="3" border="0" cellpadding = "10"
                         cellspacing = "1">
                <h:outputLabel value="Enter URL:"/>
                <h:inputText id="webServiceURL" value="#{mainController.url}" size="20"
                             required="true">
                    <f:validator validatorId="webServiceUrlValidator" />
                </h:inputText>
                <h:message for="webServiceURL" style = "color:red" />
            </h:panelGrid>
            <hr/>

            <h4>Enter parametersMap for readme file:</h4>

            <h:panelGrid id="panel2" columns="3" border="0" cellpadding = "10" cellspacing = "1">
                <h:outputLabel value="Patch name:"/>
                <h:inputText id="patchName" size="20" required="true"
                             value="#{mainController.parametersMap.get('PatchName')}"/>
                <h:message for="patchName" style = "color:red" />

                <h:outputLabel value="Date:"/>
                <h:inputText id="date" size="20" required="true" pt:placeHolder="dd/MM/yyyy"
                             value="#{mainController.parametersMap.get('date')}"/>
                <h:message for="date" style = "color:red"/>

                <h:outputLabel value="Update ID:"/>
                <h:inputText id="updateId" size="20" required="true"
                             value="#{mainController.parametersMap.get('updateId')}"/>
                <h:message for="updateId" style = "color:red" />

                <h:outputLabel value="Release version:"/>
                <h:inputText id="releaseVersion" size="20" required="true"
                             value="#{mainController.parametersMap.get('releaseVersion')}"/>
                <h:message for="releaseVersion" style = "color:red" />
            </h:panelGrid>

            <h:panelGrid id="tableGrid" columns="3" border="0" cellpadding = "1" cellspacing = "1">
                <h:dataTable id="table"
                        value="#{mainController.jiraPairs}" var="jira"
                             styleClass="employeeTable"
                             headerClass = "employeeTableHeader"
                             rowClasses = "employeeTableOddRow,employeeTableEvenRow"
                             columnClasses = "employeeTableColumn">
                    <h:column>
                        <f:facet name = "header">Jira Id</f:facet>
                        #{jira.jiraId}
                    </h:column>
                    <h:column>
                        <f:facet name = "header">Jira description</f:facet>
                        #{jira.jiraDescrip}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Delete</f:facet>
                        <h:commandButton value="Delete"
                                         actionListener="#{mainController.deleteJira(jira)}">
                            <f:ajax render="form:table"/>
                        </h:commandButton>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Edit</f:facet>
                        <h:commandButton value="Edit" type="button"
                                         action="#{mainController.setNewJira(jira)}"
                                         onclick="document.getElementById('popupGroup').style.display = 'block';"  >
                            <f:ajax render="popupForm"/>
                        </h:commandButton>

                    </h:column>
                </h:dataTable>

                <h:panelGrid id="Buttons" columns="1" border="0" cellpadding="5" cellspacing="1">
                    <h:commandButton type="button" id="Add" value = "+"
                                     onclick="document.getElementById('popupGroup').style.display = 'block';">

                    </h:commandButton>
                </h:panelGrid>
            </h:panelGrid>
            <h:commandButton id="Submit" value = "Submit" />
            <hr/>
        </h:form>

        <h:panelGroup id="popupGroup" styleClass="popup-panel-overlay" >
            <div id="popup" class="popup-panel">
                <h3>Enter jira ID and jira description</h3>
                <h:form id="popupForm">
                    <h:panelGrid columns="3" border="0" cellpadding="5" cellspasing="1">
                        <h:outputLabel value="Jira ID:"/>
                        <h:inputText id="JiraId" size="20" required="true" value="#{mainController.newJiraId}"
                                     pt:placeHolder="Enter jira Id"/>
                        <h:message id="jiraIdMessage" for="JiraId" style = "color:red"/>

                        <h:outputLabel value="Jira decription:"/>
                        <h:inputText id="JiraDesc" size="20" required="true"
                                     value="#{mainController.newJiraDescrip}"
                                     pt:placeHolder="Enter description"/>
                        <h:message id="jiraDescMessage" for="JiraDesc" style = "color:red"/>
                    </h:panelGrid>

                    <h:commandButton value="Ok"
                                     action="#{mainController.addJira}">
                        <f:ajax execute="JiraId JiraDesc" render="form:table jiraIdMessage jiraDescMessage"/>
                    </h:commandButton>
                    <h:commandButton value="Cancel"
                                     onclick="document.getElementById('popupGroup').style.display = 'none';">
                        <f:ajax />
                    </h:commandButton>
                </h:form>
            </div>
        </h:panelGroup>


    </h:body>
</html>