<?xml version = "1.0" encoding = "UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns = "http://www.w3.org/1999/xhtml"
      xmlns:h = "http://java.sun.com/jsf/html"
      xmlns:f = "http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:ui = "http://java.sun.com/jsf/facelets">
    <h:head>
        <title>Readme generator</title>
        <h:outputStylesheet library="css" name="styles.css"/>
    </h:head>

    <h:body>
        <h1>Readme generator</h1>
        <hr/>
        <h3>Please, enter a web service URL in an appropriate format</h3>
        <i>Examples:</i><br/>
        http://localhost:8080<br/>
        http://myService.com<br/>

        <h:form id="form">
            <h:panelGrid id="panel1" columns="3" border="0" cellpadding = "10"
                         cellspacing = "1">
                <h:outputLabel value="Enter URL:"/>
                <h:inputText id="webServiceURL" value="#{userData.url}" size="20"
                             required="true">
                    <f:validator validatorId="webServiceUrlValidator" />
                </h:inputText>
                <h:message for="webServiceURL" style = "color:red" />
            </h:panelGrid>
            <hr/>

            <h4>Enter parameters for readme file:</h4>

            <h:panelGrid id="panel2" columns="3" border="0" cellpadding = "10" cellspacing = "1">
                <h:outputLabel value="Patch name:"/>
                <h:inputText id="patchName" size="20" required="true"
                             value="#{userData.patchName}"/>
                <h:message for="patchName" style = "color:red" />

                <h:outputLabel value="Date:"/>
                <h:inputText id="date" size="20" required="true" pt:placeHolder="dd/MM/yyyy"
                             value="#{userData.date}"/>
                <h:message for="date" style = "color:red"/>

                <h:outputLabel value="Update ID:"/>
                <h:inputText id="updateId" size="20" required="true"
                             value="#{userData.updateId}"/>
                <h:message for="updateId" style = "color:red" />

                <h:outputLabel value="Release version:"/>
                <h:inputText id="releaseVersion" size="20" required="true"
                             value="#{userData.releaseVer}"/>
                <h:message for="releaseVersion" style = "color:red" />
            </h:panelGrid>



            <div id="TableGroup" class="tableGroup">
                <h:commandButton id="addJira" type="button" value="+" styleClass="addButton"
                                 onclick="document.getElementById('popupPanelGroup').style.display = 'block';">
                    <f:ajax event="focus" listener="#{popupDialogController.setDialogType('Add')}" render="popupForm"/>
                </h:commandButton>

                <h:dataTable id="jiraTable"
                             value="#{mainController.jiraPairs}" var="jira"
                             styleClass="employeeTable"
                             headerClass = "employeeTableHeader"
                             rowClasses = "employeeTableOddRow,employeeTableEvenRow"
                             columnClasses = "employeeTableColumn">
                    <h:column>
                        <f:facet name = "header">Jira Id</f:facet>
                        #{jira.jiraId}
                    </h:column>
                    <h:column>
                        <f:facet name = "header">Jira description</f:facet>
                        #{jira.jiraDescrip}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Delete</f:facet>
                        <h:commandButton value="Delete"
                                         action="#{mainController.deleteJira(jira)}"
                                         type="button" >
                            <f:ajax render="form:jiraTable" />
                        </h:commandButton>
                    </h:column>
                    <h:column>
                        <f:facet name="header">Edit</f:facet>
                        <h:commandButton value="Edit" type="button"
                                         action="#{mainController.setJira(jira)}"
                                         onclick="document.getElementById('popupPanelGroup').style.display = 'block';">
                            <f:ajax event="focus" listener="#{popupDialogController.setDialogType('Edit')}" render="popupForm" />
                        </h:commandButton>
                    </h:column>
                </h:dataTable>

                <h:message for="jiraTable" style="color:red"/>
            </div>

            <h:commandButton id="Submit" value = "Submit" action="#{mainController.onSubmit()}" styleClass="formSubmit" />

            <hr/>
        </h:form>

        <ui:insert name = "dialog" >
            <ui:include src = "/dialog.xhtml" />
        </ui:insert>

    </h:body>
</html>